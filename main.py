import telebot
import config

from telebot import types

bot = telebot.TeleBot(config.TOKEN)

@bot.message_handler(commands=['start'])
def welcome(message):
    #markups
    startMarkup = types.InlineKeyboardMarkup(row_width=2)
    item1 = types.InlineKeyboardButton("1", callback_data='returnMoney')
    item2 = types.InlineKeyboardButton("2", callback_data='gift')
    startMarkup.add(item1, item2)

    #start
    bot.send_message(message.chat.id,
                     "–ü—Ä–∏–≤–µ—Ç! üòâ\n\n–ù–∞ —Å–≤—è–∑–∏ –∫–æ–º–∞–Ω–¥–∞ Anpei. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–∞—Å ü§ç\n\n–ú—ã —Ö–æ—Ç–∏–º —Ç–µ–±—è –æ—Ç–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å. –í—ã–±–µ—Ä–∏ –ø–æ–¥–∞—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–µ—Ä–µ—à—å –∏ –æ—Ç–ø—Ä–∞–≤—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ü–∏—Ñ—Ä—É:\n\n1Ô∏è‚É£  –ë–æ–Ω—É—Å 100 RUB –∑–∞ –æ—Ç–∑—ã–≤ —Å —Ñ–æ—Ç–æ  –æ —Ç–æ–≤–∞—Ä–µ\n2Ô∏è‚É£  –ì–∞–π–¥ –ø–æ —É—Ö–æ–¥—É –∑–∞ –º–∞–ª—ã—à–∞–º–∏ –≤ –ø–µ—Ä–≤—ã–µ –º–µ—Å—è—Ü—ã –∂–∏–∑–Ω–∏".format(
                         message.from_user, bot.get_me()),
                     parse_mode='html', reply_markup=startMarkup)


@bot.callback_query_handler(func=lambda call: True)
def callback_inline(call):
    # markups
    startMarkup = types.InlineKeyboardMarkup(row_width=2)
    item1 = types.InlineKeyboardButton("1", callback_data='returnMoney')
    item2 = types.InlineKeyboardButton("2", callback_data='gift')
    startMarkup.add(item1, item2)

    returnMarkup = types.InlineKeyboardMarkup(row_width=2)
    item1 = types.InlineKeyboardButton("1", callback_data='bonusRule')
    returnMarkup.add(item1)

    backMarkup = types.InlineKeyboardMarkup(row_width=2)
    item1 = types.InlineKeyboardButton("1", callback_data='back')
    backMarkup.add(item1)

    try:
        if call.message:
            if call.data == 'returnMoney':
                bot.send_message(call.message.chat.id,
                                 "–î–ª—è –Ω–∞—á–∞–ª–∞, —Ö–æ—Ç–∏–º —Å–∫–∞–∑–∞—Ç—å —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤—ã–±–æ—Ä Anpei. –≠—Ç–æ –Ω–∞—Å –æ—á–µ–Ω—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç.\n\n–ê –µ—â–µ, –¥–ª—è –Ω–∞—Å –≤–∞–∂–Ω–æ —Ç–≤–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –æ –Ω–∞—à–µ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏.\n–ü–æ—ç—Ç–æ–º—É –º—ã –¥–∞—Ä–∏–º 100 RUB –∑–∞ –æ—Ç–∑—ã–≤ –æ –∫–∞–∂–¥–æ–º —Ç–æ–≤–∞—Ä–µ Anpei, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ Wildberries.\n\n–ö–ª–∞—Å—Å–Ω–æ, –ø—Ä–∞–≤–¥–∞?\n\n1Ô∏è‚É£–ü—Ä–∏—à–ª–∏ —Ü–∏—Ñ—Ä—É 1, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞".format(
                                     call.message.from_user, bot.get_me()), parse_mode='html', reply_markup=returnMarkup)
            elif call.data == 'gift':
                bot.send_message(call.message.chat.id, '–ù–∞–º –æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ –≤–∏–¥–µ—Ç—å —Å—Ä–µ–¥–∏ —Å–≤–æ–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª—å–Ω–∏—Ü, –∑–∞–±–æ—Ç–ª–∏–≤—ã—Ö –∏ –ª—é–±—è—â–∏—Ö –º–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç—Å—è –∂–∏–∑–Ω—å –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ–º —Ä–µ–±–µ–Ω–∫–∞. \n\n–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è —Ç–µ–±—è –Ω–µ–±–æ–ª—å—à–æ–π —á–µ–∫ –ª–∏—Å—Ç –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –Ω–µ–∂–Ω–æ–π –∫–æ–∂–µ–π —Å–≤–æ–µ–≥–æ –º–∞–ª—ã—à–∞.'.format(
                                     call.message.from_user, bot.get_me()), parse_mode='html')
                bot.send_message(call.message.chat.id, "–°–ª–æ–≥–∞–Ω: –ú–∞–ª—ã—à–∏ –≤—ã–±–∏—Ä–∞—é—Ç Anpei!\n\n–ú–∏—Å—Å–∏—è : –ú—ã –¥–µ–ª–∞–µ–º –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏—è—Ç–Ω—ã–º –∏  –¥–æ—Å—Ç—É–ø–Ω—ã–º! \n\n–°–µ–π—á–∞—Å –º–Ω–æ–≥–∏–µ –≤ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ –Ω–µ —Å—Ç—Ä–µ–º—è—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å–µ–º—å–∏ —Å –¥–µ—Ç—å–º–∏ –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ —Ä–µ–±–µ–Ω–æ–∫ - —ç—Ç–æ –¥–æ—Ä–æ–≥–æ!\n\n–ú—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä—ã–Ω–∫—É –¥–µ—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ü–µ–Ω–∞–º –Ω–µ —Ç–µ—Ä—è—è –∫–∞—á–µ—Å—Ç–≤–æ!\n\n–ú—ã –≤–µ—Ä–∏–º, —á—Ç–æ —Å–º–æ–∂–µ–º —Ä–∞–∑–≤–µ—è—Ç—å –º–∏—Ñ –æ —Ç–æ–º, —á—Ç–æ —Ä–µ–±–µ–Ω–æ–∫ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö –≤–ª–æ–∂–µ–Ω–∏–π.\n\n\n\n–ö–∞–∫ —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –∫–æ–∂–µ–π –º–∞–ª—ã—à–∞ —Å —Ä–æ–∂–¥–µ–Ω–∏—è ?\n\n–í –≤–æ–∑—Ä–∞—Å—Ç–µ 1-2 –º–µ—Å—è—Ü–∞ –¥–µ—Ç—Å–∫–∞—è –∫–æ–∂–∞ –æ—á–µ–Ω—å –Ω–µ–∂–Ω–∞—è –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è , –ø–æ—ç—Ç–æ–º—É —Ç—Ä–µ–±—É–µ—Ç –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. \n\n–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø—Ä–æ—á–∏—Ö –ø—Ä–æ–±–ª–µ–º - –∑–∞ –∫–æ–∂–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ —É—Ö–∞–∂–∏–≤–∞—Ç—å \n\n1Ô∏è‚É£–ë–µ—Ä–µ–∂–Ω–æ–µ –æ—á–∏—â–µ–Ω–∏–µ \n–ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π –º–∞–ª—ã—à–∞, –æ—Ç–¥–∞–π—Ç–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –≥–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º—É–ª–∞–º, –Ω–µ –≤—ã–∑—ã–≤–∞—é—â–∏–º —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ. \n2Ô∏è‚É£–ö—É–ø–∞–Ω–∏–µ \n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–æ–º–∞—à–∫—É –¥–ª—è –∫—É–ø–∞–Ω–∏—è –Ω–æ–≤–æ—Ä–æ–∂–¥–µ–Ω–Ω–æ–≥–æ . –≠—Ç–æ—Ç —Ü–≤–µ—Ç–æ–∫ –æ—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–µ–Ω –≤ —Å—Ä–µ–¥—Å—Ç–≤–∞—Ö –ø–æ —É—Ö–æ–¥—É –∑–∞ –∫–æ–∂–µ–π. –†–æ–º–∞—à–∫–∞ - —è–≤–ª—è–µ—Ç—Å—è –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–º —Ä–∞—Å—Ç–µ–Ω–∏–µ–º, —Ç–∞–∫ –∫–∞–∫ –æ–±–ª–∞–¥–∞–µ—Ç –±–∞–∫—Ç–µ—Ä–∏—Ü–∏–¥–Ω—ã–º–∏, –∞–Ω—Ç–∏—Å–µ–ø—Ç–∏—á–µ—Å–∫–∏–º–∏, —Å–º—è–≥—á–∞—é—â–∏–º–∏ –∏ —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.\n3Ô∏è‚É£–£—Ö–æ–¥ –ø–æ—Å–ª–µ –∫—É–ø–∞–Ω–∏—è\n–ë–µ–∑ —Ä–∞—Å—Ç–∏—Ä–∞–Ω–∏–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤—ã—Å—É—à–∏—Ç–µ –∫–æ–∂—É –º–ª–∞–¥–µ–Ω—Ü–∞, –ø—Ä–æ–º–æ–∫–Ω—É–≤ –º—è–≥–∫–∏–º –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ–º –∏–ª–∏ —Å–∞–ª—Ñ–µ—Ç–∫–æ–π.\n4Ô∏è‚É£–°–º–µ–Ω–∞ –ø–æ–¥–≥—É–∑–Ω–∏–∫–∞\n–†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –ø–æ–¥–≥—É–∑–Ω–∏–∫, –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –æ–ø—Ä–µ–ª–æ—Å—Ç–µ–π. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –∫–æ–∂—É –≤–ª–∞–∂–Ω–æ–π —Å–∞–ª—Ñ–µ—Ç–∫–æ–π –∏–ª–∏ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ–º, —Å–º–æ—á–µ–Ω–Ω—ã–º –≤ —Ç–µ–ø–ª–æ–π –≤–æ–¥–µ. \n5Ô∏è‚É£ –£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ\n–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Å–º–µ–Ω—ã –ø–æ–¥–≥—É–∑–Ω–∏–∫–∞ —Å–º–∞–∑—ã–≤–∞–π—Ç–µ –∫–æ–∂—É –Ω–æ–≤–æ—Ä–æ–∂–¥–µ–Ω–Ω–æ–≥–æ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–º –∫—Ä–µ–º–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–æ—Å—Ç–∞–≤–µ –º–∞—Å–ª–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å—Ç—è–Ω—É—Ç–æ—Å—Ç–∏ –∏ —Å—É—Ö–æ—Å—Ç–∏ –∫–æ–∂–∏.\n\n–ü–µ—Ä–≤–æ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –∫ —Ä–µ–±–µ–Ω–∫—É - –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —á—É–¥–µ—Å–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –≤ –∂–∏–∑–Ω–∏ –∂–µ–Ω—â–∏–Ω—ã. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å —ç—Ç–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∞–≤–∏–ª –∏ –∫–æ–∂–∞ –≤–∞—à–µ–≥–æ –º–∞–ª—ã—à–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –º—è–≥–∫–æ–π –∏ –Ω–µ–∂–Ω–æ–π.".format(
                                     call.message.from_user, bot.get_me()), parse_mode='html')
            elif call.data == 'bonusRule':
                bot.send_message(call.message.chat.id,
                                 "–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –¥–µ–Ω–µ–∂–Ω—ã–π –±–æ–Ω—É—Å, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤. \n–†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –≤ Anpei: –ø—Ä–æ–¥—É–∫—Ç, —É–ø–∞–∫–æ–≤–∫–∞, —Å–µ—Ä–≤–∏—Å, –¥–æ—Å—Ç–∞–≤–∫–∞.\n–ü—Ä–∏–∫—Ä–µ–ø–∏ —Ñ–æ—Ç–æ ( –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ )\n\n‚ùóÔ∏è–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –Ω–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –≤–∫–ª–∞–¥—ã—à –Ω–µ –ø–æ–ø–∞–ª –≤ –∫–∞–¥—Ä. –û –Ω–µ–º –∑–Ω–∞–µ–º —Ç–æ–ª—å–∫–æ –º—ã —Å —Ç–æ–±–æ–πüòâ\n\n–°–ª–µ–¥—É–π –ø–æ –ø—É–Ω–∫—Ç–∞–º, –∏ —É —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è ü§ç:\n\n1Ô∏è‚É£ –ó–∞–π–¥–∏ –≤ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç\n2Ô∏è‚É£ –ù–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª ‚Äú–ü–æ–∫—É–ø–∫–∏‚Äù\n3Ô∏è‚É£ –í—ã–±–µ—Ä–∏ —Ç–æ–≤–∞—Ä Anpei, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –ø—Ä–∏–æ–±—Ä–µ–ª(-–∞).\n4Ô∏è‚É£ –ö–ª–∏–∫–Ω–∏ –Ω–∞ ‚Äú–û—Ç–∑—ã–≤‚Äù, –¥–∞–ª–µ–µ ‚Äì ‚Äú–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤‚Äù\n5Ô∏è‚É£ –ù–∞–ø–∏—à–∏, —á–µ–º —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –Ω–∞—à –±—Ä–µ–Ω–¥\n6Ô∏è‚É£ –ö–ª–∏–∫–Ω–∏ ‚Äú–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤‚Äù\n7Ô∏è‚É£ –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –≥–æ—Ç–æ–≤–æ–≥–æ –æ—Ç–∑—ã–≤–∞ –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏ –≤ –Ω–∞—à —á–∞—Ç-–±–æ—Ç\n‚ùóÔ∏è–ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ, –æ—Ç–ø—Ä–∞–≤—å \"1\"".format(
                                     call.message.from_user, bot.get_me()), parse_mode='html', reply_markup=backMarkup)
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞–¥–º–∏–Ω—É —Ñ–æ—Ç–∫–∏

            elif call.data == 'back':
                bot.send_message(call.message.chat.id,
                                 "–ü—Ä–∏–≤–µ—Ç! üòâ\n\n–ù–∞ —Å–≤—è–∑–∏ –∫–æ–º–∞–Ω–¥–∞ Anpei. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–∞—Å ü§ç\n\n–ú—ã —Ö–æ—Ç–∏–º —Ç–µ–±—è –æ—Ç–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å. –í—ã–±–µ—Ä–∏ –ø–æ–¥–∞—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–µ—Ä–µ—à—å –∏ –æ—Ç–ø—Ä–∞–≤—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ü–∏—Ñ—Ä—É:\n\n1Ô∏è‚É£  –ë–æ–Ω—É—Å 100 RUB –∑–∞ –æ—Ç–∑—ã–≤ —Å —Ñ–æ—Ç–æ  –æ —Ç–æ–≤–∞—Ä–µ\n2Ô∏è‚É£  –ì–∞–π–¥ –ø–æ —É—Ö–æ–¥—É –∑–∞ –º–∞–ª—ã—à–∞–º–∏ –≤ –ø–µ—Ä–≤—ã–µ –º–µ—Å—è—Ü—ã –∂–∏–∑–Ω–∏".format(
                                     call.message.from_user, bot.get_me()),
                                 parse_mode='html', reply_markup=startMarkup)

    except Exception as e:
        print(repr(e))

@bot.message_handler(content_types=["text", "sticker", "pinned_message", "photo", "audio"])
def reciveMessage(message):
    raw = message.photo[2].file_id
    name = raw + ".jpg"
    file_info = bot.get_file(raw)
    downloaded_file = bot.download_file(file_info.file_path)
    with open(name, 'wb') as new_file:
        new_file.write(downloaded_file)
    img = open(name, 'rb')
    bot.send_message(461612832,
                     "–û—Ç–∑—ã–≤ –æ—Ç\n*{name} {last}*".format(name=message.chat.first_name, last=message.chat.last_name),
                     parse_mode="Markdown")  # –æ—Ç –∫–æ–≥–æ –∏–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    bot.send_photo(461612832, img)
    # bot.send_message(message.chat.id, "*{name}!*\n\n–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ñ—É".format(name=message.chat.first_name,
    #                                                                         last=message.chat.last_name,
    #                                                                         text=message.text),
    #                                                                         parse_mode="Markdown")  # —Ç–æ —á—Ç–æ –ø–æ–π–¥–µ—Ç —é–∑–µ—Ä—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è


# RUN
bot.polling(none_stop=True)